스프링 빈과 의존관계
===============

1. 컴포넌트 스캔과 자동 의존관계 설정
화면을 붙이기 위해선 
컨트롤러와  view 템플릿 필요 

멤버 컨트롤러를 만들어야 되는데, 멤버 서비스를 통해서 회원가입하고 조회하는 것을 의존관계라고 한다.

스프링 빈을 등록하는 2가지 방법 
컴포넌트 스캔과 자동 의존관계 설정
자바 코드로 직접 스프링 빈 등록하기

컴포넌트 스캔 원리
@Component 애노테이션이 있으면 스프링 빈으로 자동 등록된다.
@Controller 컨트롤러가 스프링 빈으로 자동 등록된 이유도 컴포넌트 스캔 때문이다.

@Autowired: 스프링 컨테이너에서 멤버 서비스를 가져다가 연결 시켜놓는다.

컴포넌트 스캔 방식
@Controller: 이걸 보고 스프링이 뜰 때 spring 컨테이너에 등록 해놓음 
스프링 컨테이너에 인스턴스 등록해놓고 돌려서 쓸 수 있다.
@Service: 스프링에 올라올 때 하위 코드를 스프링 컨테이너에 서비스로 등록
@Repository: 스프링에 올라올 때 하위 코드를 스프링 컨테이너에 리포지토리로 등록 

상위 세개 안에 들어가보면 @component를 다 포함하고 있음

> 참고: 생성자에 @Autowired 를 사용하면 객체 생성 시점에 스프링 컨테이너에서 해당 스프링 빈을 찾아서 주입한다. 생성자가 1개만 있으면 @Autowired 는 생략할 수 있다.
> 참고: 스프링은 스프링 컨테이너에 스프링 빈을 등록할 때, 기본으로 싱글톤으로 등록한다(유일하게 하나만 등록해서 공유한다) 따라서 같은 스프링 빈이면 모두 같은 인스턴스다. 설정으로 싱글톤이 아니게 설정할 수 있지만, 특별한 경우를 제외하면 대부분 싱글톤을 사용한다.

2. 자바 코드로 직접 스프링 빈 등록하기
애노테이션 제거하고 직접 자바코드로 등록하는 방법 

public class SpringConfig {
  
         @Bean
        public MemberService memberService() {
            return new MemberService(memberRepository());
        }
        @Bean
        public MemberRepository memberRepository() {
          return new MemoryMemberRepository();
        }
}

 참고: DI에는 필드 주입, setter 주입(외부에서 아무나 호출이 가능하게 됨), 생성자 주입 이렇게 3가지 방법이 있다. 의존관계가 실행중에
동적으로 변하는 경우는 거의 없으므로 생성자 주입을 권장한다.

MemoryMemberRepository를 나중에 바꿔치기 할건데 코드를 하나도 고치지 않고 
설정 파일만 손 대기 위해서 component 사용한다. (중요)

