회원관리 예제 - 백엔드 개발
=====================

1. 비즈니스 요구사항 정리

일반적인 웹 애플리케이션 계층 구조

컨트롤러: 웹 MVC의 컨트롤러 역할
서비스: 핵심 비즈니스 로직 구현 (회원 중복 가입 방지 기능)
리포지토리: 데이터베이스에 접근, 도메인 객체를 DB에 저장하고 관리
도메인: 비즈니스 도메인 객체, 예) 회원, 주문, 쿠폰 등등 주로 데이터베이스에 저장하고 관리됨

2. 회원 도메인과 리포지토리 만들기

Repository 구현하는 규칙

List<Comment> findAllByPostId(Long post_id); 해당 구문을 보면 해석해 보면 findAll (comment) 전부 찾아볼건데 postId로 찾는다는 거다. 이렇게만 작성해주면 JPA가 알아서 SQL문을 생성해준다.

 method	 기능

 save()	 레코드 저장 (insert, update)
 findOne()	 primary key로 레코드 한건 찾기
 findAll()	 전체 레코드 불러오기. 정렬(sort), 페이징(pageable) 가능
 count()	 레코드 갯수
 delete()	 레코드 삭제

SQL문이 복잡해서 메소드 이름만으로 해결이 안될때는 직접 쿼리하는 방법도 있다.
  
  
3. 회원 리포지토리 테스트 케이스 작성

자바는 JUnit이라는 프레임워크로 테스트를 실행해서 메인 메서드를 통한 기능실행의 시간 지연을 해결한다.
@Aftereach은 테스트 메서드를 실행하고 나서 어노테이션 아래에 있는 메소드가 무조건 실행되는데 clearStore 메소드에서 Map에 담긴 데이터를 clear 해주는 역할을 함 

4. 회원 서비스 테스트 
————————


테스트는 각각 독립적으로 실행되어야 한다. 테스트 순서에 의존관계가 있는 것은 좋은 테스트가 아니다.

memberServiceTest { 
given
	무언가 주어질 때 
when 
	실행 했을 때 (조인) 
then
	결과가 이게 나와야 돼 (검증)
}

테스트가 길 때 유리함

IllegalStateException e = assertThrows(IllegalStateException.class,
    () -> memberService.join(member2));
assertThat(e.getMessage()).isEqualTo("이미 존재하는 회원입니다.");
  
같은 이름과 Join 하면 
중복이름 Test에 걸림 

@BeforeEach
테스트를 실행하기 전에 BeforeEach 실행 
